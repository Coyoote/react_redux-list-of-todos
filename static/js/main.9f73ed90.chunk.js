(this["webpackJsonpreact_redux-list-of-todos"]=this["webpackJsonpreact_redux-list-of-todos"]||[]).push([[0],{31:function(e,t,c){},32:function(e,t,c){"use strict";c.r(t);var a=c(11),n=c.n(a),s=c(9),r=c(18),i=c(6),o=c(16),l=c(17),d=c(10),u=function(e){return{type:"currentTodo/SET",payload:e}},j=function(){return{type:"currentTodo/REMOVE"}},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"currentTodo/SET":return Object(d.a)({},t.payload);case"currentTodo/REMOVE":return null;default:return e}},h=function(e,t){return{type:"filter/ALL",payload:{status:e,query:t}}},f=function(e,t){return{type:"filter/ACTIVE",payload:{status:e,query:t}}},O=function(e,t){return{type:"filter/COMPLETED",payload:{status:e,query:t}}},m=function(e,t){return{type:"filter/SET_QUERY",payload:{status:e,query:t}}},p={query:"",status:"all"},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"filter/ALL":case"filter/ACTIVE":case"filter/COMPLETED":case"filter/SET_QUERY":return{query:t.payload.query,status:t.payload.status};default:return e}},v=c(19),y=function(e){return{type:"todos/ADD",payload:e}},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return"todos/ADD"===t.type?Object(v.a)(t.payload):e},g=Object(i.combineReducers)({currentTodo:b,filter:x,todos:N}),T=Object(i.createStore)(g,Object(o.composeWithDevTools)(Object(i.applyMiddleware)(l.a))),E=c(12),w=c(3),k=c(5),S=c.n(k),C=c(0),L=(c(28),c(29),c(8)),q=c.n(L),D=s.b,A=s.c,_=c(1),I=function(e){var t=e.todo,c=D(),a=A((function(e){return e.currentTodo})),n=(null===a||void 0===a?void 0:a.id)===t.id;return Object(_.jsxs)("tr",{"data-cy":"todo",children:[Object(_.jsx)("td",{className:"is-vcentered",children:t.id}),Object(_.jsx)("td",{className:"is-vcentered",children:t.completed&&Object(_.jsx)("span",{className:"icon","data-cy":"iconCompleted",children:Object(_.jsx)("i",{className:"fas fa-check"})})}),Object(_.jsx)("td",{className:"is-vcentered is-expanded",children:Object(_.jsx)("p",{className:q()({"has-text-success":t.completed,"has-text-danger":!t.completed}),children:t.title})}),Object(_.jsx)("td",{className:"has-text-right is-vcentered",children:Object(_.jsx)("button",{"data-cy":"selectButton",className:"button",type:"button",onClick:function(){return c(u(t))},children:Object(_.jsx)("span",{className:"icon",children:Object(_.jsx)("i",{className:q()("far",{"fa-eye":!n,"fa-eye-slash":n})})})})})]})},M=function(e){var t=e.todos;return Object(_.jsxs)(_.Fragment,{children:[!t.length&&Object(_.jsx)("p",{className:"notification is-warning",children:"There are no todos matching current filter criteria"}),Object(_.jsxs)("table",{className:"table is-narrow is-fullwidth",children:[Object(_.jsx)("thead",{children:Object(_.jsxs)("tr",{children:[Object(_.jsx)("th",{children:"#"}),Object(_.jsx)("th",{children:Object(_.jsx)("span",{className:"icon",children:Object(_.jsx)("i",{className:"fas fa-check"})})}),Object(_.jsx)("th",{children:"Title"}),Object(_.jsx)("th",{children:" "})]})}),Object(_.jsx)("tbody",{children:t.map((function(e){return Object(_.jsx)(I,{todo:e},e.id)}))})]})]})},R=function(){var e=D(),t=A((function(e){return e.filter})),c=t.status,a=t.query;return Object(_.jsxs)("form",{className:"field has-addons",onSubmit:function(e){return e.preventDefault()},children:[Object(_.jsx)("p",{className:"control",children:Object(_.jsx)("span",{className:"select",children:Object(_.jsxs)("select",{"data-cy":"statusSelect",value:c,onChange:function(t){var c=t.target.value;switch(c){case"all":e(h(c,a));break;case"active":e(f(c,a));break;case"completed":e(O(c,a))}},children:[Object(_.jsx)("option",{value:"all",children:"All"}),Object(_.jsx)("option",{value:"active",children:"Active"}),Object(_.jsx)("option",{value:"completed",children:"Completed"})]})})}),Object(_.jsxs)("p",{className:"control is-expanded has-icons-left has-icons-right",children:[Object(_.jsx)("input",{"data-cy":"searchInput",type:"text",className:"input",placeholder:"Search...",value:a,onChange:function(t){var a=t.target.value;e(m(c,a))}}),Object(_.jsx)("span",{className:"icon is-left",children:Object(_.jsx)("i",{className:"fas fa-magnifying-glass"})}),Object(_.jsx)("span",{className:"icon is-right",style:{pointerEvents:"all"},children:a&&Object(_.jsx)("button",{"data-cy":"clearSearchButton",type:"button",className:"delete",onClick:function(){e(h(c,""))}})})]})]})};function F(e){var t,c="https://mate-academy.github.io/react_dynamic-list-of-todos/api"+e+".json";return(t=300,new Promise((function(e){setTimeout(e,t)}))).then((function(){return fetch(c)})).then((function(e){return e.json()}))}var P=function(e){return F("/users/".concat(e))},V=(c(31),function(){return Object(_.jsx)("div",{className:"Loader","data-cy":"loader",children:Object(_.jsx)("div",{className:"Loader__content"})})}),B=function(){var e=Object(C.useState)(null),t=Object(w.a)(e,2),c=t[0],a=t[1],n=Object(C.useState)(!1),s=Object(w.a)(n,2),r=s[0],i=s[1],o=Object(C.useState)(!1),l=Object(w.a)(o,2),d=l[0],u=l[1],b=D(),h=A((function(e){return e.currentTodo})),f=h,O=f.id,m=f.title,p=f.completed,x=f.userId,v=function(){var e=Object(E.a)(S.a.mark((function e(){var t;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i(!0),e.next=4,P(x);case 4:t=e.sent,a(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),u(!0);case 11:return e.prev=11,i(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})));return function(){return e.apply(this,arguments)}}();return Object(C.useEffect)((function(){v()}),[]),Object(_.jsxs)("div",{className:q()("modal",{"is-active":h}),"data-cy":"modal",children:[Object(_.jsx)("div",{className:"modal-background"}),r?Object(_.jsx)(V,{}):Object(_.jsxs)("div",{className:"modal-card",children:[Object(_.jsxs)("header",{className:"modal-card-head",children:[Object(_.jsx)("div",{className:"modal-card-title has-text-weight-medium","data-cy":"modal-header",children:d?"Error":"Todo #".concat(O)}),Object(_.jsx)("button",{type:"button",className:"delete","data-cy":"modal-close",onClick:function(){return b(j())}})]}),Object(_.jsxs)("div",{className:"modal-card-body",children:[Object(_.jsx)("p",{className:"block","data-cy":"modal-title",children:d?Object(_.jsx)("p",{className:"notification is-warning",children:"Failed to load user from server"}):m}),!d&&Object(_.jsxs)("p",{className:"block","data-cy":"modal-user",children:[p?Object(_.jsx)("strong",{className:"has-text-success",children:"Done"}):Object(_.jsx)("strong",{className:"has-text-danger",children:"Planned"})," by ",Object(_.jsx)("a",{href:"mailto:".concat(null===c||void 0===c?void 0:c.email),children:null===c||void 0===c?void 0:c.name})]})]})]})]})},J=function(){var e=A((function(e){return e.todos})),t=A((function(e){return e.filter})),c=A((function(e){return e.currentTodo})),a=D(),n=Object(C.useState)(!1),s=Object(w.a)(n,2),r=s[0],i=s[1],o=Object(C.useState)(!1),l=Object(w.a)(o,2),d=l[0],u=l[1],j=function(){var e=Object(E.a)(S.a.mark((function e(){var t;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i(!0),e.next=4,F("/todos");case 4:t=e.sent,a(y(t)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),u(!0);case 11:return e.prev=11,i(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})));return function(){return e.apply(this,arguments)}}();Object(C.useEffect)((function(){j()}),[]);var b=function(e,t){var c=e,a=t.query,n=t.status;return a&&(c=c.filter((function(e){var t=a.toLowerCase();return e.title.toLowerCase().includes(t)}))),n&&(c=c.filter((function(e){switch(n){case"active":return!e.completed;case"completed":return e.completed;default:return e}}))),c}(e,t);return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("div",{className:"section",children:Object(_.jsx)("div",{className:"container",children:Object(_.jsxs)("div",{className:"box",children:[Object(_.jsx)("h1",{className:"title",children:"Todos:"}),Object(_.jsx)("div",{className:"block",children:Object(_.jsx)(R,{})}),Object(_.jsxs)("div",{className:"block",children:[r?Object(_.jsx)(V,{}):Object(_.jsx)(M,{todos:b}),d&&Object(_.jsx)("p",{className:"notification is-warning",children:"Failed to load todos from server"})]})]})})}),c&&Object(_.jsx)(B,{})]})},Q=function(){return Object(_.jsx)(s.a,{store:T,children:Object(_.jsx)(r.a,{children:Object(_.jsx)(J,{})})})};n.a.render(Object(_.jsx)(Q,{}),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.9f73ed90.chunk.js.map